---

title: Main


keywords: fastai
sidebar: home_sidebar

summary: "API details."
description: "API details."
nb_path: "01_main.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 01_main.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="TimeSeries.get_no_series" class="doc_header"><code>TimeSeries.get_no_series</code><a href="https://github.com/KkeipertCelver/celverapi/tree/master/celverapi/core.py#L43" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>TimeSeries.get_no_series</code>()</p>
</blockquote>

</div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="TimeSeries.get_id" class="doc_header"><code>TimeSeries.get_id</code><a href="https://github.com/KkeipertCelver/celverapi/tree/master/celverapi/core.py#L51" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>TimeSeries.get_id</code>()</p>
</blockquote>

</div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="TimeSeries.get_datum" class="doc_header"><code>TimeSeries.get_datum</code><a href="https://github.com/KkeipertCelver/celverapi/tree/master/celverapi/core.py#L57" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>TimeSeries.get_datum</code>()</p>
</blockquote>

</div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="TimeSeries.plot_subset" class="doc_header"><code>TimeSeries.plot_subset</code><a href="https://github.com/KkeipertCelver/celverapi/tree/master/celverapi/core.py#L62" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>TimeSeries.plot_subset</code>(<strong><code>col_wrap</code></strong>)</p>
</blockquote>

</div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="NaiveForecast.prepare_data" class="doc_header"><code>NaiveForecast.prepare_data</code><a href="https://github.com/KkeipertCelver/celverapi/tree/master/celverapi/core.py#L107" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>NaiveForecast.prepare_data</code>()</p>
</blockquote>

</div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="NaiveForecast.fit" class="doc_header"><code>NaiveForecast.fit</code><a href="https://github.com/KkeipertCelver/celverapi/tree/master/celverapi/core.py#L113" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>NaiveForecast.fit</code>()</p>
</blockquote>

</div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="NaiveForecast.predict" class="doc_header"><code>NaiveForecast.predict</code><a href="https://github.com/KkeipertCelver/celverapi/tree/master/celverapi/core.py#L120" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>NaiveForecast.predict</code>(<strong><code>mode</code></strong>=<em><code>'val'</code></em>)</p>
</blockquote>

</div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="NaiveForecast.refit" class="doc_header"><code>NaiveForecast.refit</code><a href="https://github.com/KkeipertCelver/celverapi/tree/master/celverapi/core.py#L128" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>NaiveForecast.refit</code>()</p>
</blockquote>

</div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="TrendForecast.prepare_data" class="doc_header"><code>TrendForecast.prepare_data</code><a href="https://github.com/KkeipertCelver/celverapi/tree/master/celverapi/core.py#L143" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>TrendForecast.prepare_data</code>()</p>
</blockquote>

</div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="TrendForecast.fit" class="doc_header"><code>TrendForecast.fit</code><a href="https://github.com/KkeipertCelver/celverapi/tree/master/celverapi/core.py#L149" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>TrendForecast.fit</code>()</p>
</blockquote>

</div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="TrendForecast.predict" class="doc_header"><code>TrendForecast.predict</code><a href="https://github.com/KkeipertCelver/celverapi/tree/master/celverapi/core.py#L156" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>TrendForecast.predict</code>(<strong><code>mode</code></strong>=<em><code>'val'</code></em>)</p>
</blockquote>

</div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="TrendForecast.refit" class="doc_header"><code>TrendForecast.refit</code><a href="https://github.com/KkeipertCelver/celverapi/tree/master/celverapi/core.py#L164" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>TrendForecast.refit</code>()</p>
</blockquote>

</div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="ETSModel.prepare_data" class="doc_header"><code>ETSModel.prepare_data</code><a href="https://github.com/KkeipertCelver/celverapi/tree/master/celverapi/core.py#L181" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>ETSModel.prepare_data</code>()</p>
</blockquote>

</div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="ETSModel.fit" class="doc_header"><code>ETSModel.fit</code><a href="https://github.com/KkeipertCelver/celverapi/tree/master/celverapi/core.py#L187" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>ETSModel.fit</code>()</p>
</blockquote>

</div>

</div>

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="ETSModel.predict" class="doc_header"><code>ETSModel.predict</code><a href="https://github.com/KkeipertCelver/celverapi/tree/master/celverapi/core.py#L194" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>ETSModel.predict</code>(<strong><code>mode</code></strong>=<em><code>'val'</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="unique_dataframe_values" class="doc_header"><code>unique_dataframe_values</code><a href="https://github.com/KkeipertCelver/celverapi/tree/master/celverapi/main.py#L37" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>unique_dataframe_values</code>(<strong><code>id_column</code></strong>:<code>str</code>)</p>
</blockquote>
<p>This Function returns a List of DataFrames from every unique Value in the ID Column.</p>
<ul>
<li>id_column (String) : Name of the Column from the DataFrame where the Unique IDs are located. This will split the DataFrame into smaller DataFrames from every single unique value in the column.</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="split_into_train_test_dataframe" class="doc_header"><code>split_into_train_test_dataframe</code><a href="https://github.com/KkeipertCelver/celverapi/tree/master/celverapi/main.py#L61" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>split_into_train_test_dataframe</code>(<strong><code>list_of_df</code></strong>:<code>list</code>, <strong><code>date_column</code></strong>:<code>str</code>, <strong><code>date_to_split</code></strong>:<code>str</code>)</p>
</blockquote>
<p>The function splits the DataFrames into a Traing and Test sets.
The DataFrames are saved in 2 Differents Lists, one for TRAIN DF and other for TEST DF.
It returs two lists: list_of_trained_df, list_of_test_df</p>
<ul>
<li>list_of_df (List) : Lists of DataFrames with only one ID.</li>
<li>date_column (String) : Name of the Colum where the Date is located.</li>
<li>date_to_split (String) : YYYY-MM-DD from where we want to split the DataFrames into Training and Test sets. Example, the Train set will be every day until 2017-08-01. And the Test set from 2017-08-01 (inclusive), until the end of the DataFrame.</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="converting_dataframes_into_objects" class="doc_header"><code>converting_dataframes_into_objects</code><a href="https://github.com/KkeipertCelver/celverapi/tree/master/celverapi/main.py#L92" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>converting_dataframes_into_objects</code>(<strong><code>list_df_train</code></strong>:<code>list</code>, <strong><code>list_df_val</code></strong>:<code>list</code>, <strong><code>date_column</code></strong>:<code>str</code>, <strong><code>id_column</code></strong>:<code>str</code>, <strong><code>value_column</code></strong>:<code>str</code>)</p>
</blockquote>
<p>The function creates TimeSeries Object from the respective DataFrames
The Objects are saved in 2 Differents Lists, one for TRAIN DF and other for TEST DF.
It returs two lists: trained_timeseries, valed_timeseries</p>
<ul>
<li>list_df_train : List of trained DataFrames</li>
<li>list_df_val (List) : List of tested DataFrames</li>
<li>date_column (String) : Name of the Colum where the Date is located.</li>
<li>id_column (String) : Name of the Column from the DataFrame where the Unique IDs are located.</li>
<li>value_column (String) : Name of the Column where the values to messure are located.</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="creating_forecasting_task_dict" class="doc_header"><code>creating_forecasting_task_dict</code><a href="https://github.com/KkeipertCelver/celverapi/tree/master/celverapi/main.py#L127" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>creating_forecasting_task_dict</code>(<strong><code>trained_ts</code></strong>:<code>list</code>, <strong><code>valed_ts</code></strong>:<code>list</code>, <strong><code>forecast_horizon</code></strong>:<code>int</code>)</p>
</blockquote>
<p>The function creates a dictionary mapping the ID value with the respective ForecastingTask object.
It returs a dictionary : dict_of_forecasting_tasks</p>
<ul>
<li>trained_ts (List) : List of trained Timeseries objects.</li>
<li>valed_ts (List) : List of tested/validated objects.</li>
<li>forecast_horizon (int) : Amount of steps to forecast</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="ets_func" class="doc_header"><code>ets_func</code><a href="https://github.com/KkeipertCelver/celverapi/tree/master/celverapi/main.py#L154" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>ets_func</code>(<strong><code>ft</code></strong>:<a href="/celverapi/core.html#ForecastingTask"><code>ForecastingTask</code></a>)</p>
</blockquote>
<p>Function for the ETS Model.
It returns a DataFrame with the following columns: Qty(Predicted), ID, Date, Model</p>
<ul>
<li>ft : ForecastingTask Object</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="naive_func" class="doc_header"><code>naive_func</code><a href="https://github.com/KkeipertCelver/celverapi/tree/master/celverapi/main.py#L177" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>naive_func</code>(<strong><code>ft</code></strong>:<a href="/celverapi/core.html#ForecastingTask"><code>ForecastingTask</code></a>)</p>
</blockquote>
<p>Function for the Naive Model.
It returns a DataFrame with the following columns: Qty(Predicted), ID, Date, Model</p>
<ul>
<li>ft : ForecastingTask Object</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="trend_func" class="doc_header"><code>trend_func</code><a href="https://github.com/KkeipertCelver/celverapi/tree/master/celverapi/main.py#L200" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>trend_func</code>(<strong><code>ft</code></strong>:<a href="/celverapi/core.html#ForecastingTask"><code>ForecastingTask</code></a>)</p>
</blockquote>
<p>Function for the Trend Model.
It returns a DataFrame with the following columns: Qty(Predicted), ID, Date, Model</p>
<ul>
<li>ft : ForecastingTask Object</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="forecast" class="doc_header"><code>forecast</code><a href="https://github.com/KkeipertCelver/celverapi/tree/master/celverapi/main.py#L225" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>forecast</code>(<strong><code>list_of_models</code></strong>:<code>list</code>, <strong><code>dict_of_forecasting_tasks</code></strong>:<code>dict</code>)</p>
</blockquote>
<p>This Function allows the user to forecast multiple Timeseires and multiple Models simultaneously using a multiprocessing aproach.
It returns a DataFrame with all the models and Timeseries passed in the function.</p>
<ul>
<li>list_of_models(List) : A list with the Forecasting models to apply. For the moment only "ets", "naive" and trend".</li>
<li>dict_of_forecasting_tasks(Dict) : A dictionary with the Forecasting tasks. Can be created with the function "creating_forecasting_task_dict()".</li>
</ul>
<blockquote><p>Important: This function needs to run inside of the if <strong>name</strong> == '<strong>main</strong>' condition!</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

</div>


